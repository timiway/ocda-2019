<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0, maximum-scale=1, minimum-scale=1">

        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="css/app.css">
        <script src="libs/modernizr-2.8.3.min.js"></script>
    </head>
    <body>

    <div id="musicSwitch" class="m-btn m-motion"></div>

    <div id="app-body">
        <div id="app-paper" class="">
            <div class="ele a"><img src="img/001.png"></div>
            <div class="ele b"><img src="img/002.png"><span class="light"></span></div>
            <div class="ele line l1"></div>
            <div class="ele h"><img src="img/008.png"><span class="light"></span></div>
            <div class="ele c"><img src="img/003.png"></div>
            <div class="ele d"><img src="img/004.png"></div>
            <div class="ele e"><img src="img/005.png"><span class="light"></span></div>
            <div class="ele f"><img src="img/006.png"><span class="light"></span></div>
            <div class="ele g"><img src="img/007.png"><span class="light"></span></div>
            <div class="ele line l2"></div>
        </div>
    </div>
    <audio id="m" autoplay="autoplay" loop="loop" src="bg1.mp3"></audio>

    <script src="libs/jquery-1.12.0.min.js"></script>
    <script>
        $(function () {
            var star = $('<div class="star"></div>');
            for (var i=0; i<80; i++) {
                setTimeout(createStar, Math.round(Math.random()*2000));
            }
            $(".light").each(function (i) {
                var _this = this;
                setTimeout(function () {
                    $(_this).show().addClass("light-motion");
                }, i*200+10000)
            });
            //
            var media = document.getElementById("m");
            document.addEventListener('WeixinJSBridgeReady', function(){media.play()});
            $("#musicSwitch").click(function () {
                $(this).toggleClass("m-motion");
                if (media.paused) media.play();
                else media.pause();
            });
        });
        function createStar() {
            var star = $('<div class="star star-motion"></div>');
            var size = Math.round(Math.random()*50)+20;
            var x = Math.round(Math.random()*($(window).width()-100))+50;
            var y = Math.round(Math.random()*($(window).height()-100))+50;
            star.width(size).height(size).css({left: x, top: y}).appendTo("body");
            setTimeout(function () {
                star.remove();
                createStar();
            }, 2000);
        }
    </script>
    </body>
</html>
